<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Workers/DatabaseWorker" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.0">
<title data-rh="true">DatabaseWorker | Arklex AI Agent Framework</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://arklexai.github.io/Agent-First-Organization/docs/Workers/DatabaseWorker"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DatabaseWorker | Arklex AI Agent Framework"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/Agent-First-Organization/img/articulateai.png"><link data-rh="true" rel="canonical" href="https://arklexai.github.io/Agent-First-Organization/docs/Workers/DatabaseWorker"><link data-rh="true" rel="alternate" href="https://arklexai.github.io/Agent-First-Organization/docs/Workers/DatabaseWorker" hreflang="en"><link data-rh="true" rel="alternate" href="https://arklexai.github.io/Agent-First-Organization/docs/Workers/DatabaseWorker" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Agent-First-Organization/blog/rss.xml" title="Arklex AI Agent Framework RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Agent-First-Organization/blog/atom.xml" title="Arklex AI Agent Framework Atom Feed">




<script src="/js/rb2b-tracking.js"></script><link rel="stylesheet" href="/Agent-First-Organization/assets/css/styles.5ae84a35.css">
<script src="/Agent-First-Organization/assets/js/runtime~main.3823b0d9.js" defer="defer"></script>
<script src="/Agent-First-Organization/assets/js/main.fd4732ff.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/Agent-First-Organization/"></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Agent-First-Organization/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Agent-First-Organization/docs/tutorials/intro">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Agent-First-Organization/docs/Config/intro">Config</a><button aria-label="Expand sidebar category &#x27;Config&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Agent-First-Organization/docs/Taskgraph/intro">Taskgraph</a><button aria-label="Expand sidebar category &#x27;Taskgraph&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Agent-First-Organization/docs/MessageState">MessageState</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Agent-First-Organization/docs/Workers/intro">Workers</a><button aria-label="Collapse sidebar category &#x27;Workers&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Agent-First-Organization/docs/Workers">Workers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Agent-First-Organization/docs/Workers/MessageWorker">MessageWorker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Agent-First-Organization/docs/Workers/RAGWorker">RAGWorker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Agent-First-Organization/docs/Workers/DatabaseWorker">DatabaseWorker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Agent-First-Organization/docs/Workers/SearchWorker">SearchWorker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Agent-First-Organization/docs/Workers/DefaultWorker">DefaultWorker</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Agent-First-Organization/docs/Tools">Tools</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Agent-First-Organization/docs/Integration/intro">Integration</a><button aria-label="Expand sidebar category &#x27;Integration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Agent-First-Organization/docs/Evaluation/intro">Evaluation</a><button aria-label="Expand sidebar category &#x27;Evaluation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Agent-First-Organization/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Agent-First-Organization/docs/Workers/intro"><span itemprop="name">Workers</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DatabaseWorker</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DatabaseWorker</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Database Workers can handle customer inquiries and take correct operations. Different from other workers, this worker can be a highly customized one capable of solving different tasks. For each task, there will be a different database to interact with.</p>
<p>In this tutorial, we will focus on a specific use case: a show booking system. For such a customer service, it always involves operations like search, book a show, update booking information, and cancel a booking.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="database-construction">Database Construction<a href="#database-construction" class="hash-link" aria-label="Direct link to Database Construction" title="Direct link to Database Construction">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="database-schema">Database Schema<a href="#database-schema" class="hash-link" aria-label="Direct link to Database Schema" title="Direct link to Database Schema">​</a></h3>
<p>For a show booking database, a simple design is to include three tables in the database: <code>show</code>, <code>user</code>, and <code>booking</code>. For the <code>show</code> table, it includes information of all available shows; the <code>user</code> table contains information of registered users in the booking system; the <code>booking</code> table has all booking records. A</p>
<ul>
<li>Database Schema: show</li>
</ul>
<table><thead><tr><th>Column Name</th><th>Data Type</th><th>Constraints</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>VARCHAR(40)</code></td><td>Primary Key</td></tr><tr><td><code>show_name</code></td><td><code>VARCHAR(100)</code></td><td></td></tr><tr><td><code>genre</code></td><td><code>VARCHAR(40)</code></td><td></td></tr><tr><td><code>date</code></td><td><code>DATE</code></td><td></td></tr><tr><td><code>time</code></td><td><code>TIME</code></td><td></td></tr><tr><td><code>description</code></td><td><code>TEXT</code></td><td></td></tr><tr><td><code>location</code></td><td><code>VARCHAR(100)</code></td><td></td></tr><tr><td><code>price</code></td><td><code>DECIMAL</code></td><td></td></tr><tr><td><code>available_seats</code></td><td><code>INTEGER</code></td><td></td></tr></tbody></table>
<ul>
<li>Database Schema: user</li>
</ul>
<table><thead><tr><th>Column Name</th><th>Data Type</th><th>Constraints</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>VARCHAR(40)</code></td><td>Primary Key</td></tr><tr><td><code>first_name</code></td><td><code>VARCHAR(40)</code></td><td></td></tr><tr><td><code>last_name</code></td><td><code>VARCHAR(40)</code></td><td></td></tr><tr><td><code>email</code></td><td><code>VARCHAR(60)</code></td><td></td></tr><tr><td><code>register_at</code></td><td><code>TIMESTAMP</code></td><td></td></tr><tr><td><code>last_login</code></td><td><code>TIMESTAMP</code></td><td></td></tr></tbody></table>
<ul>
<li>Database Schema: booking</li>
</ul>
<table><thead><tr><th>Column Name</th><th>Data Type</th><th>Constraints</th></tr></thead><tbody><tr><td><code>id</code></td><td><code>VARCHAR(40)</code></td><td>Primary Key</td></tr><tr><td><code>show_id</code></td><td><code>VARCHAR(40)</code></td><td>Foreign Key (<code>show(id)</code>)</td></tr><tr><td><code>user_id</code></td><td><code>VARCHAR(40)</code></td><td>Foreign Key (<code>user(id)</code>)</td></tr><tr><td><code>created_at</code></td><td><code>TIMESTAMP</code></td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="populate-the-database">Populate the database<a href="#populate-the-database" class="hash-link" aria-label="Direct link to Populate the database" title="Direct link to Populate the database">​</a></h3>
<p>You can construct the database using <code>SQLite</code> and populate it with some sample shows and users. For subsequent tests, please create at least one show and one user, and note down the user id.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="slot-filling">Slot Filling<a href="#slot-filling" class="hash-link" aria-label="Direct link to Slot Filling" title="Direct link to Slot Filling">​</a></h2>
<p>After each round of conversation, slots are extracted and matched against their original values in the database. For instance, if the user says, “I would like to watch Carmen on Tuesday,” the extracted slots for the show name and time will be mapped to “Carmen” and “2024-11-15,” respectively. Those verified slots will be used in future tasks such as searching, booking, and etc.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="action-verification">Action Verification<a href="#action-verification" class="hash-link" aria-label="Direct link to Action Verification" title="Direct link to Action Verification">​</a></h2>
<p>As defined in <a href="/Agent-First-Organization/docs/Taskgraph/Generation">TaskGraph</a>, there is an attribute <code>task</code> for each node, which will be used to determine the corresponding database action. In the sample database worker, we define several actions:</p>
<ul>
<li>SearchShow: Search for shows</li>
<li>BookShow: Book a show</li>
<li>CheckBooking: Check details of booked show(s)</li>
<li>CancelBooking: Cancel a booking</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample-conversation">Sample Conversation<a href="#sample-conversation" class="hash-link" aria-label="Direct link to Sample Conversation" title="Direct link to Sample Conversation">​</a></h2>
<p>After introducing each individual component of the Database Worker, we will try searching and booking functions for a sample conversation:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">dbworker_function_sample.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Bot</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Hello! How can I help you today?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Do you have recommendation for shows?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Bot</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Could you let me know your preferences or any specific details you&#x27;re looking for in an event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> like the type of show</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> location</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or date?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> I want to watch the magic flute.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Bot</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Based on your interest in </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;The Magic Flute,&quot;</span><span class="token plain"> here are some available shows for you to consider. They are all taking place at the Lyric Opera of Chicago in Chicago</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> IL. The performances are scheduled for November 15th</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> 20th</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> and 25th</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2024</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> each starting at </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> PM. This whimsical opera by Wolfgang Amadeus Mozart is priced at $</span><span class="token number" style="color:rgb(247, 140, 108)">130</span><span class="token plain"> per ticket. Please let me know if any of these options appeal to you.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> I want to watch it on Nov </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Bot</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Are you interested in exploring more options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> or would you like help with booking the show on November 25th?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Book the show.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Bot</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> The show has been booked. Thank you for using our service today! We would love to hear your feedback on how we can improve. Do you have any comments or suggestions?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can checkout the <a href="https://smith.langchain.com/public/f061143d-b4f8-42d6-9bf6-fa678d956d4e/r" target="_blank" rel="noopener noreferrer">LangSmith Trace</a> when searching available shows based on the user&#x27;s query. The TaskGraph first calls the Database Worker to verify that the user would like to use the search function, then search for relevant shows based on extracted slots, and finally return searched results.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/arklexai/Agent-First-Organization/tree/main/docs/docs/Workers/DatabaseWorker.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Agent-First-Organization/docs/Workers/RAGWorker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RAGWorker</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Agent-First-Organization/docs/Workers/SearchWorker"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SearchWorker</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#database-construction" class="table-of-contents__link toc-highlight">Database Construction</a><ul><li><a href="#database-schema" class="table-of-contents__link toc-highlight">Database Schema</a></li><li><a href="#populate-the-database" class="table-of-contents__link toc-highlight">Populate the database</a></li></ul></li><li><a href="#slot-filling" class="table-of-contents__link toc-highlight">Slot Filling</a></li><li><a href="#action-verification" class="table-of-contents__link toc-highlight">Action Verification</a></li><li><a href="#sample-conversation" class="table-of-contents__link toc-highlight">Sample Conversation</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>